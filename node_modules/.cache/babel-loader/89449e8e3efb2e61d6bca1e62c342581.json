{"ast":null,"code":"import{useState,useEffect}from'react';const BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:3001';export const useOnlinePlayerCount=()=>{const[onlinePlayers,setOnlinePlayers]=useState(0);useEffect(()=>{const fetchCount=async()=>{try{const response=await fetch(`${BASE_URL}/players/count`);if(!response.ok){console.error('Server response:',response.status,response.statusText);throw new Error(`HTTP error! status: ${response.status}`);}const count=await response.json();setOnlinePlayers(count);}catch(error){console.error('Error fetching online player number:',error);throw error;}};fetchCount();console.log(\"useOnlinePlayerCount: Fetching online player count\");const interval=setInterval(fetchCount,100);return()=>clearInterval(interval);},[]);return onlinePlayers;};","map":{"version":3,"names":["useState","useEffect","BASE_URL","process","env","REACT_APP_API_URL","useOnlinePlayerCount","onlinePlayers","setOnlinePlayers","fetchCount","response","fetch","ok","console","error","status","statusText","Error","count","json","log","interval","setInterval","clearInterval"],"sources":["/Users/tanjun/Documents/24PointsGameOnline/src/hooks/useOnlinePlayerCount.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Input } from '../components/GameStyles';\n\nconst BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001';\n\nexport const useOnlinePlayerCount = () => {\n    const [onlinePlayers, setOnlinePlayers] = useState<number>(0);\n    \n    useEffect(() => {\n        const fetchCount = async () => {\n            try {\n                const response = await fetch(`${BASE_URL}/players/count`);\n    \n                if (!response.ok) {\n                    console.error('Server response:', response.status, response.statusText);\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n                const count = await response.json();\n                setOnlinePlayers(count);                \n            } catch (error) {\n                console.error('Error fetching online player number:', error);\n                throw error;\n            }\n        }\n\n        fetchCount();\n        console.log(\"useOnlinePlayerCount: Fetching online player count\");\n        const interval = setInterval(fetchCount, 100);\n        return () => clearInterval(interval);\n\n    }, []);\n\n    return onlinePlayers;\n};\n\n"],"mappings":"AAAA,OAAgBA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAGlD,KAAM,CAAAC,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,uBAAuB,CAEzE,MAAO,MAAM,CAAAC,oBAAoB,CAAGA,CAAA,GAAM,CACtC,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGR,QAAQ,CAAS,CAAC,CAAC,CAE7DC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAQ,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGT,QAAQ,gBAAgB,CAAC,CAEzD,GAAI,CAACQ,QAAQ,CAACE,EAAE,CAAE,CACdC,OAAO,CAACC,KAAK,CAAC,kBAAkB,CAAEJ,QAAQ,CAACK,MAAM,CAAEL,QAAQ,CAACM,UAAU,CAAC,CACvE,KAAM,IAAI,CAAAC,KAAK,CAAC,uBAAuBP,QAAQ,CAACK,MAAM,EAAE,CAAC,CAC7D,CACA,KAAM,CAAAG,KAAK,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CACnCX,gBAAgB,CAACU,KAAK,CAAC,CAC3B,CAAE,MAAOJ,KAAK,CAAE,CACZD,OAAO,CAACC,KAAK,CAAC,sCAAsC,CAAEA,KAAK,CAAC,CAC5D,KAAM,CAAAA,KAAK,CACf,CACJ,CAAC,CAEDL,UAAU,CAAC,CAAC,CACZI,OAAO,CAACO,GAAG,CAAC,oDAAoD,CAAC,CACjE,KAAM,CAAAC,QAAQ,CAAGC,WAAW,CAACb,UAAU,CAAE,GAAG,CAAC,CAC7C,MAAO,IAAMc,aAAa,CAACF,QAAQ,CAAC,CAExC,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAAd,aAAa,CACxB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}