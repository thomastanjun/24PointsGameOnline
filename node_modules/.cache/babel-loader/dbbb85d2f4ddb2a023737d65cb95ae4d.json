{"ast":null,"code":"class GameClient {\n  constructor(playerName) {\n    this._baseURL = void 0;\n    this._gameState = void 0;\n    this._playerName = void 0;\n    this._gameNumbers = void 0;\n    this._baseURL = 'http://localhost:8080/game';\n    this._gameState = {};\n    this._playerName = playerName;\n    this._gameNumbers = [];\n  }\n\n  // Core game operations\n  async joinGame() {\n    try {\n      const response = await fetch(`${this._baseURL}/player/${this._playerName}`, {\n        method: 'PUT'\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message);\n      }\n      const data = await response.json();\n      this._updateGameState(data);\n    } catch (error) {\n      console.error('Error joining game:', error);\n      throw error;\n    }\n  }\n  async leaveGame() {\n    try {\n      const response = await fetch(`${this._baseURL}/player/${this._playerName}`, {\n        method: 'DELETE'\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message);\n      }\n      this._gameState = {};\n      this._gameNumbers = [];\n    } catch (error) {\n      console.error('Error quitting game:', error);\n      throw error;\n    }\n  }\n  async addToken(token) {\n    try {\n      const response = await fetch(`${this._baseURL}/add/token/${this._playerName}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'text/plain'\n        },\n        body: token\n      });\n      const data = await response.json();\n      this._updateGameState(data);\n    } catch (error) {\n      console.error('Error adding token:', error);\n      throw error;\n    }\n  }\n  async removeToken() {\n    try {\n      const response = await fetch(`${this._baseURL}/remove/token/${this._playerName}`, {\n        method: 'PUT'\n      });\n      const data = await response.json();\n      this._updateGameState(data);\n      console.log(\"reveived data after remove\", this._gameState);\n    } catch (error) {\n      console.error('Error removing token:', error);\n      throw error;\n    }\n  }\n  async clearFormula() {\n    try {\n      const response = await fetch(`${this._baseURL}/clear/formula/${this._playerName}`, {\n        method: 'PUT'\n      });\n      const data = await response.json();\n      this._updateGameState(data);\n      console.log(\"reveived data after clear\", this._gameState);\n    } catch (error) {\n      console.error('Error clearing formula:', error);\n      throw error;\n    }\n  }\n  async fetchGameNumbers() {\n    try {\n      const response = await fetch(`${this._baseURL}/numbers/game1`);\n      const data = await response.json();\n      console.log(\"reveived numbers after fetch\", data);\n      this._gameNumbers = data.gameNumbers;\n    } catch (error) {\n      console.error('Error getting game numbers:', error);\n      throw error;\n    }\n  }\n  async startNewGame() {\n    try {\n      const response = await fetch(`${this._baseURL}/newgame/game1`, {\n        method: 'PUT'\n      });\n      const data = await response.json();\n      this._gameNumbers = data.gameNumbers;\n    } catch (error) {\n      console.error('Error starting new game:', error);\n      throw error;\n    }\n  }\n  async fetchGameState() {\n    try {\n      const response = await fetch(`${this._baseURL}/state/game1`);\n      const data = await response.json();\n      this._updateGameState(data);\n    } catch (error) {\n      console.error('Error fetching game state:', error);\n      throw error;\n    }\n  }\n  getCurrentPlayerFormula() {\n    var _this$_gameState$this;\n    return ((_this$_gameState$this = this._gameState[this._playerName]) === null || _this$_gameState$this === void 0 ? void 0 : _this$_gameState$this.formula) || '';\n  }\n  getCurrentPlayerResult() {\n    var _this$_gameState$this2;\n    return ((_this$_gameState$this2 = this._gameState[this._playerName]) === null || _this$_gameState$this2 === void 0 ? void 0 : _this$_gameState$this2.value) || '0';\n  }\n  getCurrentPlayerError() {\n    var _this$_gameState$this3;\n    return ((_this$_gameState$this3 = this._gameState[this._playerName]) === null || _this$_gameState$this3 === void 0 ? void 0 : _this$_gameState$this3.value) || '';\n  }\n  getGameNumbersString() {\n    return this._gameNumbers;\n  }\n  _updateGameState(data) {\n    this._gameState = data;\n  }\n}\nexport default GameClient;","map":{"version":3,"names":["GameClient","constructor","playerName","_baseURL","_gameState","_playerName","_gameNumbers","joinGame","response","fetch","method","ok","errorData","json","Error","message","data","_updateGameState","error","console","leaveGame","addToken","token","headers","body","removeToken","log","clearFormula","fetchGameNumbers","gameNumbers","startNewGame","fetchGameState","getCurrentPlayerFormula","_this$_gameState$this","formula","getCurrentPlayerResult","_this$_gameState$this2","value","getCurrentPlayerError","_this$_gameState$this3","getGameNumbersString"],"sources":["/Users/tanjun/Downloads/24PointsGameOnline/frontend/src/services/GameClient.ts"],"sourcesContent":["import { GameState } from '../GameDefinitions';\n\ninterface ErrorResponse {\n    message: string;\n    code: string;\n    timestamp: number;\n}\n\nclass GameClient {\n    private _baseURL: string;\n    private _gameState: GameState;\n    private _playerName: string; \n    private _gameNumbers: string[];\n\n    constructor(playerName: string) {\n        this._baseURL = 'http://localhost:8080/game';\n        this._gameState = {};\n        this._playerName = playerName;\n        this._gameNumbers = [];\n    }\n\n    // Core game operations\n    public async joinGame(): Promise<void> {\n        try {\n            const response = await fetch(`${this._baseURL}/player/${this._playerName}`, {\n                method: 'PUT'\n            });\n            if (!response.ok) {\n                const errorData: ErrorResponse = await response.json();\n                throw new Error(errorData.message);\n            }\n            const data = await response.json();\n            this._updateGameState(data);\n        } catch (error) {\n            console.error('Error joining game:', error);\n            throw error;\n        }\n    }\n\n    public async leaveGame(): Promise<void> {\n        try {\n            const response = await fetch(`${this._baseURL}/player/${this._playerName}`, {\n                method: 'DELETE'\n            });\n            if (!response.ok) {\n                const errorData: ErrorResponse = await response.json();\n                throw new Error(errorData.message);\n            }\n            this._gameState = {};\n            this._gameNumbers = [];\n        } catch (error) {\n            console.error('Error quitting game:', error);\n            throw error;\n        }\n    }\n\n    public async addToken(token: string): Promise<void> {\n        try {\n            const response = await fetch(`${this._baseURL}/add/token/${this._playerName}`, {\n                method: 'PUT',\n                headers: {\n                    'Content-Type': 'text/plain'\n                },\n                body: token\n            });\n            const data = await response.json();\n            this._updateGameState(data);\n        } catch (error) {\n            console.error('Error adding token:', error);\n            throw error;\n        }\n    }\n\n    public async removeToken(): Promise<void> {\n        try {\n            const response = await fetch(`${this._baseURL}/remove/token/${this._playerName}`, {\n                method: 'PUT'\n            });\n            const data = await response.json();\n            this._updateGameState(data);\n            console.log(\"reveived data after remove\", this._gameState);\n        } catch (error) {\n            console.error('Error removing token:', error);\n            throw error;\n        }\n    }\n\n    public async clearFormula(): Promise<void> {\n        try {\n            const response = await fetch(`${this._baseURL}/clear/formula/${this._playerName}`, {\n                method: 'PUT'\n            });\n            const data = await response.json();\n            this._updateGameState(data);\n            console.log(\"reveived data after clear\", this._gameState);\n        } catch (error) {\n            console.error('Error clearing formula:', error);\n            throw error;\n        }\n    }\n\n    \n    public async fetchGameNumbers(): Promise<void> {\n        try {\n            const response = await fetch(`${this._baseURL}/numbers/game1`);\n            const data = await response.json();\n            console.log(\"reveived numbers after fetch\", data);\n            this._gameNumbers = data.gameNumbers;\n        } catch (error) {\n            console.error('Error getting game numbers:', error);\n            throw error;\n        }\n    }\n    \n\n    public async startNewGame(): Promise<void> {\n        try {\n            const response = await fetch(`${this._baseURL}/newgame/game1`, {\n                method: 'PUT'\n            });\n            const data = await response.json();\n            this._gameNumbers = data.gameNumbers;\n        } catch (error) {\n            console.error('Error starting new game:', error);\n            throw error;\n        }\n    }\n\n    public async fetchGameState(): Promise<void> {\n        try {\n            const response = await fetch(`${this._baseURL}/state/game1`);\n            const data = await response.json();\n            this._updateGameState(data);\n        } catch (error) {\n            console.error('Error fetching game state:', error);\n            throw error;\n        }\n    }\n\n    public getCurrentPlayerFormula(): string {\n        return this._gameState[this._playerName]?.formula || '';\n    }\n\n    public getCurrentPlayerResult(): string {\n        return this._gameState[this._playerName]?.value || '0';\n    }\n\n    public getCurrentPlayerError(): string {\n        return this._gameState[this._playerName]?.value || '';\n    }\n\n    public getGameNumbersString(): string[] {\n        return this._gameNumbers;\n    }\n\n    private _updateGameState(data: any): void {\n        this._gameState = data;\n    }\n\n}\n\nexport default GameClient;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}